Metadata-Version: 2.1
Name: fusion-models
Version: 0.1.0
Summary: Models for fusion project
Home-page: https://git.myfusionplatform.com/pranav/fusion_models
Author: Dev Fusion
Author-email: dev@fusionpractices.com
License: UNKNOWN
Platform: UNKNOWN
Classifier: Programming Language :: Python :: 3
Classifier: License :: Private
Classifier: Operating System :: Ubuntu 18.04
Description-Content-Type: text/markdown
Requires-Dist: alembic (==1.0.0)
Requires-Dist: psycopg2-binary (==2.7.6.1)

# Fusion models
This project contains models used in fusion practices


## Pre-requisites
* This project is written on `python-3.6` and requires the same to be
installed
* This project works with `psql (10.5 (Ubuntu 10.5-1.pgdg18.04+1))`, and 
needs to be installed
* Everything mentioned in the following steps (from step 2 onwards) should be
performed inside a `virtualenv`
* Inside the project directory with your `virtualenv` activated,
perform the following command to install all the project dependencies:

```bash
$ pip3 install -r requirements.txt
```


## Migrate master database
* To create/update the master DB models, edit the `./fusion_alembic/alembic
.ini`, and replace `postgres://user:password@host/masterDB` with your own DB 
url
* Run 

```bash
export superuser_email='superuser@email.com'
alembic -c ./fusion_alembic/alembic.ini upgrade head
```
to update the database
* If you are getting `ModuleNotFoundError` error execute 

```bash
export PYTHONPATH='.'
```
, and then execute above command


## Migrate tenant database
* To create/update the tenant DB models, edit the `./tenant_alembic/alembic
.ini`, and replace `postgres://user:password@host/tenantDB` with your own DB 
url

* Run the following command to create extensions.
```bash
sudo -u superuser psql tenantDB < tenant_alembic/extensions.sql
```

* Run

```bash
alembic -c ./tenant_alembic/alembic.ini upgrade head
```
to update the database
* If you are getting `ModuleNotFoundError` error execute

```bash
export PYTHONPATH='.'
```
, and then execute above command.


## Migrate scheduler database
* To create/update the scheduler DB models, edit the `./scheduler_alembic/alembic
.ini`, and replace `postgres://user:password@host/schedulerDB` with your own DB
url

* Run

```bash
alembic -c ./scheduler_alembic/alembic.ini upgrade head
```
to update the database
* If you are getting `ModuleNotFoundError` error execute

```bash
export PYTHONPATH='.'
```
, and then execute above command.


