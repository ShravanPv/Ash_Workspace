from datetime import datetime

from sqlalchemy import Column, Integer, Sequence, ForeignKey, DateTime, text

from fusion_models.tenant.base import ClientBase


class ProcessDetail(ClientBase):
    __tablename__ = 'process_details'

    id = Column(Integer, Sequence('process_details_id_seq'),
                primary_key=True)
    process_id = Column(Integer, ForeignKey(
        'batch_processes.id'), nullable=False)
    chunk_number = Column(Integer, nullable=False)
    chunk_size = Column(Integer, nullable=False)
    successful_records = Column(Integer, nullable=False)
    erred_records = Column(Integer, nullable=False)

    created_on = Column(DateTime, server_default=text('(now() at time zone '
                                                      '\'utc\')'))
    modified_on = Column(DateTime, onupdate=datetime.utcnow)
