from sqlalchemy import Column, Integer, Sequence, ForeignKey, DateTime, \
    text
from sqlalchemy.dialects.postgresql import UUID, JSONB

from fusion_models.tenant.base import ClientBase


class BatchFileMapping(ClientBase):
    __tablename__ = 'batch_file_mappings'

    id = Column(Integer, Sequence('batch_file_mappings_id_seq'),
                primary_key=True)
    batch_process_id = Column(Integer, ForeignKey('batch_processes.id'),
                              nullable=False)
    file_id = Column(UUID(as_uuid=True), ForeignKey('files.id'),
                     nullable=False)
    additional_info = Column(JSONB, nullable=True)
    created_on = Column(DateTime, server_default=text('(now() at time zone '
                                                      '\'utc\')'))
