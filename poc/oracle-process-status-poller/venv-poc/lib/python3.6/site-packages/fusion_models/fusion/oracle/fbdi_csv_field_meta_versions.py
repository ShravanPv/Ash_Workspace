from datetime import datetime

from sqlalchemy import Column, Integer, Sequence, ForeignKey, DateTime, text

from fusion_models.fusion.base import FusionBase


class OracleFbdiCsvFieldMetaVersion(FusionBase):
    __tablename__ = 'oracle_fbdi_csv_field_meta_versions'

    id = Column(
        Integer,
        Sequence('oracle_fbdi_csv_field_meta_versions_id_seq'),
        primary_key=True)
    oracle_fbdi_csv_field_meta_id = Column(
        Integer,
        ForeignKey('oracle_fbdi_csv_field_meta.id'),
        nullable=False
    )
    oracle_version_id = Column(
        Integer,
        ForeignKey('oracle_versions.id'),
        nullable=False
    )

    created_on = Column(DateTime,
                        server_default=text("(now() at time zone 'utc')"))
    modified_on = Column(DateTime, onupdate=datetime.utcnow)
    modified_by = Column(Integer, ForeignKey('users.id'), nullable=False)
